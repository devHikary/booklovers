<div class="card align-items-center">
  <div class="d-flex px-2">
    <div class="col">
      <ng-template #t let-fill="fill">
        <i class="bi-star-fill">
          <i *ngIf="fill > 0" class="bi-star-fill filled" [style.width.%]="fill"></i>
        </i>
      </ng-template>

      <ngb-rating [(rate)]="book.annotation === null? 0 : book.annotation.rating" [starTemplate]="t" [readonly]="false" [max]="5" (rateChange)="toggleRate()"
        [ariaValueText]="ariaValueText"></ngb-rating>
    </div>
    <div class="col">
      <a title="Favoritar o livro" href="javascript:;" (click)="toggleFavorite()">
        <i class="bi-heart-fill" [class]="book.annotation === null?  '' :  book.annotation.favorite == 1? 'filled-heart' : ''" ></i>
      </a>

      <!-- <ng-template #heart let-fill="fill">
        <i class="bi-heart-fill">
          <i *ngIf="fill > 0" class="bi-heart-fill filled-heart" [style.width.%]="fill"></i>
        </i>
      </ng-template>

      <ngb-rating [(rate)]="book.favorite" [starTemplate]="heart" [readonly]="false" [max]="1"
        [ariaValueText]="ariaValueText"></ngb-rating> -->
    </div>
    <div class="col-2 d-flex justify-content-end">
      <a title="Detalhes do livro" href="javascript:;" (click)="detailBook(book.id)">
        <i class="bi bi-pencil-square"></i>
      </a>

    </div>
  </div>
  <img class="card-img-top" src="{{book.thumbnail}}" alt="thumbnail">
  <div class="card-body p-2 w-100">
    <h5 class="card-title text-truncate max-width text-capitalize">{{book.title? book.title : "Não cadastrado"}}</h5>
    <p class="card-text text-truncate max-width text-capitalize">
      <ng-container *ngIf="book.authors.length == 0; else elseBlock">
        Não cadastrado
      </ng-container>
    <ng-template #elseBlock >
      <ng-container *ngFor="let author of book.authors">
        {{author.name + "; "}}
      </ng-container>
    </ng-template>
    </p>
    <p class="card-text"><small class="text-muted text-truncate max-width text-capitalize">{{book.publisher?
        book.publisher : "Não cadastrado"}}</small></p>

  </div>

</div>
